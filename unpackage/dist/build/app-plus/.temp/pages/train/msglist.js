require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([1],{153:function(t,e,a){"use strict";var s=n(a(1)),i=n(a(154));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(i.default))},154:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(156),i=a.n(s),n=a(161);var o=function(t){a(155)},c=a(0)(i.a,n.a,o,null,null);e.default=c.exports},155:function(t,e){},156:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},i=c(a(3)),n=c(a(157)),o=a(4);function c(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{showTask:!1,startDate:"2018-01-01",endDate:"2018-02-02",pushlist:[],lifecat:"",totallist:[],loadingType:0,contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},page:1}},computed:s({},(0,o.mapState)(["user"])),methods:{startDateChange:function(t){this.startDate=t.detail.value},endDateChange:function(t){this.endDate=t.detail.value},islogin:function(){null!==this.user.user||t.reLaunch({url:"../../pages/manage/login"})},message:function(e){t.navigateTo({url:"trainmessage?pushid="+e})},getpush:function(e){var a=this;t.request({url:i.default.hosturl+"index/getpush.html",method:"POST",data:{token:this.user.user.token,lifecat:this.lifecat,page:e},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){0==e.data.code?(a.pushlist=e.data.list,e.data.list.forEach(function(t,e){a.totallist.push(t)})):t.showToast({icon:"none",title:"出错啦，请联系客服"})},fail:function(){t.showToast({icon:"none",title:"网络错误"})}})},add:function(e,a){console.log(a);t.request({url:i.default.hosturl+"index/checkpush.html",method:"POST",data:{token:this.user.user.token,pushid:a},header:{"content-type":"application/x-www-form-urlencoded"},success:function(s){if(console.log(JSON.stringify(s.data)),0==s.data.code){var i={lifecat:e,pushid:a};return 1==s.data.result?void t.navigateTo({url:"add?param="+JSON.stringify(i)}):2==s.data.result?void t.showToast({icon:"none",title:"任务已过期"}):3==s.data.result?void t.showToast({icon:"none",title:"您所属的中队已经完成该任务啦"}):4==s.data.result?void 0:void t.showToast({icon:"none",title:"出错啦，请联系客服"})}t.showToast({icon:"none",title:"出错啦，请联系客服"})},fail:function(){t.showToast({icon:"none",title:"网络错误"})}})}},onReachBottom:function(){console.log(this.pushlist),this.pushlist.length<10?this.loadingType=2:(this.loadingType=1,this.page++,this.getpush(this.page),this.loadingType)},components:{uniLoadMore:n.default},onLoad:function(t){this.lifecat=t.lifecat,this.islogin(),this.getpush(this.page)},onShow:function(){},onUnload:function(){this.totallist=[],this.pushlist=[]}}}).call(e,a(2).default)},157:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(159),i=a.n(s),n=a(160);var o=function(t){a(158)},c=a(0)(i.a,n.a,o,null,null);e.default=c.exports},158:function(t,e){},159:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"load-more",props:{loadingType:{type:Number,default:0},showImage:{type:Boolean,default:!0},color:{type:String,default:"#777777"},contentText:{type:Object,default:function(){return{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}}}},data:function(){return{}}}},160:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"load-more"},[a("view",{directives:[{name:"show",rawName:"v-show",value:1===t.loadingType&&t.showImage,expression:"loadingType === 1 && showImage"}],staticClass:"loading-img"},[a("view",{staticClass:"load1"},[a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}})]),a("view",{staticClass:"load2"},[a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}})]),a("view",{staticClass:"load3"},[a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}}),a("view",{style:{background:t.color}})])]),a("text",{staticClass:"loading-text",style:{color:t.color}},[t._v(t._s(0===t.loadingType?t.contentText.contentdown:1===t.loadingType?t.contentText.contentrefresh:t.contentText.contentnomore))])])},staticRenderFns:[]};e.a=s},161:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"page"},[a("view",{staticClass:"header",staticStyle:{position:"fixed","z-index":"10000"}},[a("view",{staticClass:"header-left",attrs:{eventid:"vyg-0"},on:{tap:t.backs}},[a("text",{staticClass:"icon"},[t._v("")])]),a("view",{staticClass:"header-content"},[t._v("\n\t\t\t任务列表\n\t\t")]),a("view",{staticClass:"header-right"})]),a("view",{staticClass:"tab-title",staticStyle:{"margin-top":"120px"}},[a("view",{staticClass:"tab-title"},[a("view",{staticClass:"tab ",class:{select:!t.showTask},attrs:{eventid:"kHR-1"},on:{click:function(e){t.showTask=!1}}},[t._v("开始任务")]),a("view",{staticClass:"tab ",class:{select:t.showTask},attrs:{eventid:"pJ2-2"},on:{click:function(e){t.showTask=!0}}},[t._v("历史任务")])])]),""!=t.totallist?a("view",{staticClass:"list"},[a("view",{staticClass:"picker-data"},[a("picker",{staticClass:"picker-item",attrs:{mode:"date",start:"2018-01-01",end:"2019-01-01",eventid:"7eV-3"},on:{change:t.startDateChange}},[a("view",{staticClass:"picker-data-text"},[t._v("开始时间"),a("view",{staticClass:"picker-data-num"},[t._v(t._s(t.startDate))])])]),a("picker",{staticClass:"picker-item",attrs:{mode:"date",start:"2018-01-01",end:"2019-01-01",eventid:"Q6U-4"},on:{change:t.endDateChange}},[a("view",{staticClass:"picker-data-text"},[t._v("结束时间"),a("view",{staticClass:"picker-data-num"},[t._v(t._s(t.endDate))])])]),a("view",{staticClass:"mbtn findbtn"},[t._v("查询")])],1),t._l(t.totallist,function(e,s){return a("view",{key:s,staticClass:"item"},[a("view",{staticClass:"item-left",attrs:{eventid:"vTD-5-"+s},on:{tap:function(a){t.add(e.lifecat,e.pushid)}}},[a("image",{staticClass:"item-left-image",attrs:{src:"../../static/task"+e.lifecat+".png",mode:""}})]),a("view",{staticClass:"item-middle",attrs:{eventid:"Sl8-6-"+s},on:{tap:function(a){t.add(e.lifecat,e.pushid)}}},[a("text",{staticClass:"item-name"},[t._v(t._s(e.pushcontent))]),a("text",{staticClass:"item-desc"},[t._v("开始时间:"+t._s(e.starttime))]),a("text",{staticClass:"item-desc"},[t._v("结束时间:"+t._s(e.endtime))])]),a("view",{staticClass:"item-right"},[a("image",{staticClass:"item-right-image",attrs:{src:"../../static/renwu"+e.status+".png",mode:""}}),a("view",{staticClass:"item-btn-warn",attrs:{eventid:"Jan-7-"+s},on:{tap:function(a){t.message(e.pushid)}}},[t._v("详情")])])])}),a("uni-load-more",{attrs:{loadingType:t.loadingType,contentText:t.contentText,mpcomid:"UD9-0"}})],2):a("view",{staticClass:"msg-box"},[a("image",{staticClass:"msg-img",attrs:{src:"../../static/notrain.png",mode:""}}),a("text",{staticClass:"msg-title"},[t._v("暂无内容")]),a("text",{staticClass:"msg-desc"})])])},staticRenderFns:[]};e.a=s}},[153]);